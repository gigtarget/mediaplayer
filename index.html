<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>iOS26 Glass Music Player – PNG Export</title>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<style>
:root{
  --bg1:#0b0f1a;--bg2:#151a29;
  --glass:rgba(255,255,255,.08);--glass-strong:rgba(255,255,255,.14);
  --stroke:rgba(255,255,255,.22);--text:#edf2ff;--muted:#a6b0c2;
  --accent:#6aa8ff;--accent-2:#b387ff;
  --shadow:0 20px 50px rgba(0,0,0,.45);
}
.light{
  --bg1:#f0f4ff;--bg2:#e8ecfb;
  --glass:rgba(255,255,255,.6);--glass-strong:rgba(255,255,255,.85);
  --stroke:rgba(10,20,40,.12);--text:#0b1020;--muted:#46506a;
  --shadow:0 12px 40px rgba(30,40,80,.18);
}
*{box-sizing:border-box;}
html,body{height:100%;margin:0;font-family:-apple-system,system-ui,"SF Pro Text","Inter",Segoe UI,Roboto,Helvetica,Arial;}
body{display:grid;grid-template-rows:auto 1fr;gap:14px;padding:16px;
background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);transition:background .4s ease;}
.panel{display:flex;flex-wrap:wrap;gap:10px;align-items:end;padding:10px 12px;
border:1px solid var(--stroke);
background:linear-gradient(180deg,rgba(255,255,255,.14),rgba(255,255,255,.08));
border-radius:16px;}
.panel label{font-size:12px;display:flex;flex-direction:column;gap:6px;color:var(--muted);}
.panel input[type=text],.panel input[type=file]{padding:10px 12px;min-width:200px;border-radius:10px;
border:1px solid var(--stroke);background:rgba(255,255,255,.06);color:var(--text);}
.btn{padding:10px 14px;border-radius:12px;border:1px solid var(--stroke);
background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.1));
color:var(--text);cursor:pointer;transition:.2s;}
.btn:hover{transform:translateY(-1px);}
.btn.primary{background:linear-gradient(180deg,var(--accent),var(--accent-2));border:none;color:#fff;}
.info{font-size:12px;color:var(--muted);margin-left:auto;}
.theme-chip{padding:8px 12px;border-radius:999px;border:1px solid var(--stroke);
background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.1));
font-size:12px;cursor:pointer;}
.theme-chip.active{background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#fff;border:none;}
#stage{position:relative;width:min(92vw,1280px);aspect-ratio:16/9;border-radius:34px;overflow:hidden;margin:0 auto;transition:background .5s;}
#stage.frame-916{aspect-ratio:9/16;width:min(52vw,720px);}
#stage.frame-11{aspect-ratio:1/1;width:min(60vw,900px);}
.bg-orbs{position:absolute;inset:0;pointer-events:none;}
.bg-orbs:before,.bg-orbs:after{content:"";position:absolute;filter:blur(80px);opacity:.55;mix-blend-mode:screen;border-radius:50%;}
.bg-orbs:before{width:42%;height:42%;left:-8%;top:-10%;background:radial-gradient(circle at 30% 30%,#6aa8ff,transparent 60%);}
.bg-orbs:after{width:46%;height:46%;right:-6%;bottom:-12%;background:radial-gradient(circle at 70% 70%,#b387ff,transparent 60%);}
.glass-wrap{position:absolute;inset:0;padding:28px;display:grid;}
.player{margin:auto;display:grid;grid-template-columns:340px 1fr;gap:28px;align-items:center;
background:linear-gradient(180deg,var(--glass-strong),var(--glass));
backdrop-filter:blur(22px)saturate(1.25);-webkit-backdrop-filter:blur(22px)saturate(1.25);
border:1px solid var(--stroke);border-radius:28px;box-shadow:var(--shadow);
padding:24px;width:min(100%,1100px);transition:all .4s;}
.portrait .player{grid-template-columns:1fr;}
.cover{position:relative;aspect-ratio:1/1;border-radius:24px;overflow:hidden;
background:linear-gradient(135deg,#0d121f,#141b2d);border:1px solid var(--stroke);
display:grid;place-items:center;}
.cover.has-image img{
  width:100%;
  height:100%;
  object-fit:contain; /* ✅ Prevents stretching */
  object-position:center;
  background:rgba(0,0,0,.2);
}
.meta h1{margin:0 0 6px;font-size:28px;}
.meta h2{margin:0 0 18px;font-size:16px;font-weight:500;color:var(--muted);}
.badge{font-size:11px;padding:8px 10px;border-radius:999px;border:1px solid var(--stroke);
background:linear-gradient(180deg,rgba(255,255,255,.12),rgba(255,255,255,.06));
text-transform:uppercase;display:inline-block;margin-right:8px;}
.timeline{width:100%;height:6px;background:rgba(255,255,255,.1);
border-radius:999px;overflow:hidden;margin-top:20px;}
.timeline-fill{width:60%;height:100%;background:var(--accent);transition:width 1s linear;}
.controls{margin-top:22px;display:flex;justify-content:center;align-items:center;gap:20px;}
.controls button{background:linear-gradient(180deg,rgba(255,255,255,.18),rgba(255,255,255,.08));
border:1px solid var(--stroke);border-radius:50%;width:48px;height:48px;display:grid;place-items:center;
cursor:pointer;transition:all .2s ease;}
.controls button:hover{transform:scale(1.1);}
.controls svg{width:22px;height:22px;fill:var(--text);}
.toolbar{position:absolute;top:18px;left:18px;display:none;gap:10px;z-index:5;} /* ✅ hidden */
.chip{display:none;} /* ✅ hide aspect ratio chips */
.credits{position:absolute;bottom:18px;left:18px;font-size:11px;color:var(--muted);opacity:.85;}
</style>
</head>
<body>

<div class="panel">
  <label>Song Title <input id="inTitle" type="text" value="Song Title – Lounge Edit"/></label>
  <label>Artist Name <input id="inArtist" type="text" value="Artist Name • House of Tyche"/></label>
  <label>Cover Image <input id="inCover" type="file" accept="image/*"/></label>
  <!-- Aspect ratio buttons hidden -->
  <button class="btn" style="display:none;" onclick="setAspect('frame-169')">16:9</button>
  <button class="btn" style="display:none;" onclick="setAspect('frame-916')">9:16</button>
  <button class="btn" style="display:none;" onclick="setAspect('frame-11')">1:1</button>
  <button class="btn" onclick="toggleTheme()">Light/Dark</button>
  <div class="info"><button class="btn primary" onclick="downloadPNG()">Download PNG</button></div>
</div>

<div class="panel">
  <div class="theme-chip" onclick="setTheme('system')" id="th-system">System</div>
  <div class="theme-chip" onclick="setTheme('arctic')" id="th-arctic">Arctic Glass</div>
  <div class="theme-chip" onclick="setTheme('midnight')" id="th-midnight">Midnight Blue</div>
  <div class="theme-chip" onclick="setTheme('gold')" id="th-gold">Gold Ember</div>
  <div class="theme-chip" onclick="setTheme('lavender')" id="th-lavender">Lavender Dream</div>
  <div class="theme-chip" onclick="setTheme('emerald')" id="th-emerald">Emerald Mist</div>
  <div class="theme-chip" onclick="setTheme('crimson')" id="th-crimson">Crimson Noir</div>
</div>

<div id="stage" class="frame frame-169">
  <div class="bg-orbs"></div>
  <div class="glass-wrap">
    <div class="player">
      <div class="cover" id="cover"></div>
      <div class="right">
        <div class="meta">
          <h1 id="title" contenteditable>Song Title – Lounge Edit</h1>
          <h2 id="artist" contenteditable>Artist Name • House of Tyche</h2>
          <div class="badge">Hi-Res</div><div class="badge">Stereo</div><div class="badge">24-bit</div>
          <div class="timeline"><div class="timeline-fill" id="timeline"></div></div>

          <div class="controls">
            <button onclick="prevTrack()">
              <svg viewBox="0 0 24 24"><path d="M6 4v16l8.5-8L6 4zm9 0v16h3V4h-3z"/></svg>
            </button>

            <button id="ppBtn" onclick="togglePlayPause()">
              <svg id="ppIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
            </button>

            <button onclick="nextTrack()">
              <svg viewBox="0 0 24 24"><path d="M18 4v16l-8.5-8L18 4zm-11 0v16h3V4H7z"/></svg>
            </button>

            <!-- ❌ Shuffle button removed -->

            <button onclick="toggleRepeat()">
              <svg viewBox="0 0 24 24"><path d="M17 17H7v-3l-4 4 4 4v-3h10c1.1 0 2-.9 2-2v-4h-2v4zM7 7h10v3l4-4-4-4v3H7c-1.1 0-2 .9-2 2v4h2V7z"/></svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="toolbar"><!-- Hidden --></div>
  <div class="credits">iOS26 Glass Music Player – PNG Exporter (Enhanced)</div>
</div>

<script>
const stage=document.querySelector('#stage'),
cover=document.querySelector('#cover'),
titleEl=document.querySelector('#title'),
artistEl=document.querySelector('#artist'),
ppIcon=document.querySelector('#ppIcon'),
timeline=document.querySelector('#timeline');

let isPlaying=false,repeat=false,theme='system';

function togglePlayPause(){
  isPlaying=!isPlaying;
  ppIcon.innerHTML=isPlaying?'<path d="M6 5h4v14H6zm8 0h4v14h-4z"/>':'<path d="M8 5v14l11-7z"/>';
  timeline.style.width=isPlaying?'100%':'60%';
}
function prevTrack(){alert("Previous Track (visual only)");}
function nextTrack(){alert("Next Track (visual only)");}
function toggleRepeat(){repeat=!repeat;alert("Repeat "+(repeat?"On":"Off"));}
function toggleTheme(){document.body.classList.toggle('light');}
document.querySelector('#inTitle').oninput=e=>titleEl.textContent=e.target.value;
document.querySelector('#inArtist').oninput=e=>artistEl.textContent=e.target.value;
document.querySelector('#inCover').addEventListener('change',e=>{
 const f=e.target.files?.[0];if(!f)return;const r=new FileReader();
 r.onload=ev=>{cover.classList.add('has-image');cover.innerHTML=`<img src="${ev.target.result}" alt="cover"/>`;};
 r.readAsDataURL(f);
});
function setTheme(name){
  theme=name;
  document.querySelectorAll('.theme-chip').forEach(c=>c.classList.remove('active'));
  document.querySelector(`#th-${name}`)?.classList.add('active');
  const root=document.documentElement.style;
  switch(name){
    case'arctic':root.setProperty('--bg1','#dfe8ff');root.setProperty('--bg2','#b8d4ff');root.setProperty('--accent','#6aa8ff');root.setProperty('--accent-2','#a8bfff');break;
    case'midnight':root.setProperty('--bg1','#0a0f24');root.setProperty('--bg2','#181f3a');root.setProperty('--accent','#5d8eff');root.setProperty('--accent-2','#2d5fff');break;
    case'gold':root.setProperty('--bg1','#3b2a00');root.setProperty('--bg2','#a57a1c');root.setProperty('--accent','#f4c36d');root.setProperty('--accent-2','#cba05a');break;
    case'lavender':root.setProperty('--bg1','#e3d5f9');root.setProperty('--bg2','#d1b6f9');root.setProperty('--accent','#b387ff');root.setProperty('--accent-2','#d79aff');break;
    case'emerald':root.setProperty('--bg1','#003f32');root.setProperty('--bg2','#02796a');root.setProperty('--accent','#00c9a7');root.setProperty('--accent-2','#6af2d8');break;
    case'crimson':root.setProperty('--bg1','#0a0000');root.setProperty('--bg2','#400000');root.setProperty('--accent','#ff3d3d');root.setProperty('--accent-2','#ff7474');break;
    default:root.removeProperty('--bg1');root.removeProperty('--bg2');root.removeProperty('--accent');root.removeProperty('--accent-2');break;
  }
}
async function downloadPNG(){
  const canvas=await html2canvas(stage,{
    backgroundColor:null,scale:2,useCORS:true,
    onclone:(doc)=>{const img=doc.querySelector('.cover.has-image img');if(img)img.style.objectFit='contain';}
  });
  canvas.toBlob(blob=>{
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download=`${titleEl.textContent.replace(/\s+/g,'_')}_${theme}.png`;
    a.click();
    setTimeout(()=>URL.revokeObjectURL(a.href),2000);
  });
}
</script>
</body>
</html>
